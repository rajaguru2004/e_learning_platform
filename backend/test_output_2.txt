Booting script...
[dotenv@17.2.4] injecting env (12) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops
Starting Quiz Implementation Test...
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."password", "public"."users"."role_id", "public"."users"."is_active", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" LEFT JOIN "public"."roles" AS "j1" ON ("j1"."id") = ("public"."users"."role_id") WHERE ("j1"."code" = $1 AND ("j1"."id" IS NOT NULL)) LIMIT $2 OFFSET $3
Using instructor: instructor_1770451294152@example.com
Creating course...
prisma:query SELECT "public"."courses"."id", "public"."courses"."title", "public"."courses"."slug", "public"."courses"."description", "public"."courses"."instructor_id", "public"."courses"."category_id", "public"."courses"."status_code", "public"."courses"."visibility_code", "public"."courses"."access_code", "public"."courses"."thumbnail_url", "public"."courses"."price", "public"."courses"."discounted_price", "public"."courses"."duration", "public"."courses"."enrollment_count", "public"."courses"."average_rating", "public"."courses"."total_reviews", "public"."courses"."is_active", "public"."courses"."review_note", "public"."courses"."reviewed_by", "public"."courses"."reviewed_at", "public"."courses"."is_locked", "public"."courses"."created_at", "public"."courses"."updated_at" FROM "public"."courses" WHERE ("public"."courses"."slug" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."course_status_types"."id", "public"."course_status_types"."code", "public"."course_status_types"."description", "public"."course_status_types"."is_active", "public"."course_status_types"."created_at" FROM "public"."course_status_types" WHERE ("public"."course_status_types"."code" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query INSERT INTO "public"."courses" ("id","title","slug","description","instructor_id","status_code","visibility_code","access_code","price","discounted_price","duration","enrollment_count","average_rating","total_reviews","is_active","is_locked","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18) RETURNING "public"."courses"."id"
prisma:query SELECT "public"."courses"."id", "public"."courses"."title", "public"."courses"."slug", "public"."courses"."description", "public"."courses"."instructor_id", "public"."courses"."category_id", "public"."courses"."status_code", "public"."courses"."visibility_code", "public"."courses"."access_code", "public"."courses"."thumbnail_url", "public"."courses"."price", "public"."courses"."discounted_price", "public"."courses"."duration", "public"."courses"."enrollment_count", "public"."courses"."average_rating", "public"."courses"."total_reviews", "public"."courses"."is_active", "public"."courses"."review_note", "public"."courses"."reviewed_by", "public"."courses"."reviewed_at", "public"."courses"."is_locked", "public"."courses"."created_at", "public"."courses"."updated_at" FROM "public"."courses" WHERE "public"."courses"."id" = $1 LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
prisma:query INSERT INTO "public"."topics" ("id","course_id","title","description","order_index","is_active","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8) RETURNING "public"."topics"."id", "public"."topics"."course_id", "public"."topics"."title", "public"."topics"."description", "public"."topics"."order_index", "public"."topics"."is_active", "public"."topics"."created_at", "public"."topics"."updated_at"
prisma:query INSERT INTO "public"."subtopics" ("id","topic_id","title","description","video_url","duration","order_index","is_active","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) RETURNING "public"."subtopics"."id", "public"."subtopics"."topic_id", "public"."subtopics"."title", "public"."subtopics"."description", "public"."subtopics"."video_url", "public"."subtopics"."duration", "public"."subtopics"."order_index", "public"."subtopics"."is_active", "public"."subtopics"."created_at", "public"."subtopics"."updated_at"
prisma:query INSERT INTO "public"."questions" ("id","subtopic_id","question_type_id","question_text","options","correct_answer","points","order_index","is_active","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING "public"."questions"."id", "public"."questions"."subtopic_id", "public"."questions"."question_type_id", "public"."questions"."question_text", "public"."questions"."options", "public"."questions"."correct_answer", "public"."questions"."points", "public"."questions"."order_index", "public"."questions"."is_active", "public"."questions"."created_at", "public"."questions"."updated_at"
prisma:query INSERT INTO "public"."questions" ("id","subtopic_id","question_type_id","question_text","options","correct_answer","points","order_index","is_active","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) RETURNING "public"."questions"."id", "public"."questions"."subtopic_id", "public"."questions"."question_type_id", "public"."questions"."question_text", "public"."questions"."options", "public"."questions"."correct_answer", "public"."questions"."points", "public"."questions"."order_index", "public"."questions"."is_active", "public"."questions"."created_at", "public"."questions"."updated_at"
prisma:query COMMIT
prisma:query SELECT "public"."courses"."id", "public"."courses"."title", "public"."courses"."slug", "public"."courses"."description", "public"."courses"."instructor_id", "public"."courses"."category_id", "public"."courses"."status_code", "public"."courses"."visibility_code", "public"."courses"."access_code", "public"."courses"."thumbnail_url", "public"."courses"."price", "public"."courses"."discounted_price", "public"."courses"."duration", "public"."courses"."enrollment_count", "public"."courses"."average_rating", "public"."courses"."total_reviews", "public"."courses"."is_active", "public"."courses"."review_note", "public"."courses"."reviewed_by", "public"."courses"."reviewed_at", "public"."courses"."is_locked", "public"."courses"."created_at", "public"."courses"."updated_at" FROM "public"."courses" WHERE ("public"."courses"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."topics"."id", "public"."topics"."course_id", "public"."topics"."title", "public"."topics"."description", "public"."topics"."order_index", "public"."topics"."is_active", "public"."topics"."created_at", "public"."topics"."updated_at" FROM "public"."topics" WHERE "public"."topics"."course_id" IN ($1) ORDER BY "public"."topics"."order_index" ASC OFFSET $2
prisma:query SELECT "public"."subtopics"."id", "public"."subtopics"."topic_id", "public"."subtopics"."title", "public"."subtopics"."description", "public"."subtopics"."video_url", "public"."subtopics"."duration", "public"."subtopics"."order_index", "public"."subtopics"."is_active", "public"."subtopics"."created_at", "public"."subtopics"."updated_at" FROM "public"."subtopics" WHERE "public"."subtopics"."topic_id" IN ($1) ORDER BY "public"."subtopics"."order_index" ASC OFFSET $2
prisma:query SELECT "public"."questions"."id", "public"."questions"."subtopic_id", "public"."questions"."question_type_id", "public"."questions"."question_text", "public"."questions"."options", "public"."questions"."correct_answer", "public"."questions"."points", "public"."questions"."order_index", "public"."questions"."is_active", "public"."questions"."created_at", "public"."questions"."updated_at" FROM "public"."questions" WHERE "public"."questions"."subtopic_id" IN ($1) ORDER BY "public"."questions"."order_index" ASC OFFSET $2
Course created with ID: b78957b9-ed0a-423b-9dbf-6c8ed47d616d
Fetching course by ID...
prisma:query SELECT "public"."courses"."id", "public"."courses"."title", "public"."courses"."slug", "public"."courses"."description", "public"."courses"."instructor_id", "public"."courses"."category_id", "public"."courses"."status_code", "public"."courses"."visibility_code", "public"."courses"."access_code", "public"."courses"."thumbnail_url", "public"."courses"."price", "public"."courses"."discounted_price", "public"."courses"."duration", "public"."courses"."enrollment_count", "public"."courses"."average_rating", "public"."courses"."total_reviews", "public"."courses"."is_active", "public"."courses"."review_note", "public"."courses"."reviewed_by", "public"."courses"."reviewed_at", "public"."courses"."is_locked", "public"."courses"."created_at", "public"."courses"."updated_at" FROM "public"."courses" WHERE ("public"."courses"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."topics"."id", "public"."topics"."course_id", "public"."topics"."title", "public"."topics"."description", "public"."topics"."order_index", "public"."topics"."is_active", "public"."topics"."created_at", "public"."topics"."updated_at" FROM "public"."topics" WHERE "public"."topics"."course_id" IN ($1) ORDER BY "public"."topics"."order_index" ASC OFFSET $2
prisma:query SELECT "public"."subtopics"."id", "public"."subtopics"."topic_id", "public"."subtopics"."title", "public"."subtopics"."description", "public"."subtopics"."video_url", "public"."subtopics"."duration", "public"."subtopics"."order_index", "public"."subtopics"."is_active", "public"."subtopics"."created_at", "public"."subtopics"."updated_at" FROM "public"."subtopics" WHERE "public"."subtopics"."topic_id" IN ($1) ORDER BY "public"."subtopics"."order_index" ASC OFFSET $2
prisma:query SELECT "public"."questions"."id", "public"."questions"."subtopic_id", "public"."questions"."question_type_id", "public"."questions"."question_text", "public"."questions"."options", "public"."questions"."correct_answer", "public"."questions"."points", "public"."questions"."order_index", "public"."questions"."is_active", "public"."questions"."created_at", "public"."questions"."updated_at" FROM "public"."questions" WHERE "public"."questions"."subtopic_id" IN ($1) ORDER BY "public"."questions"."order_index" ASC OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."name", "public"."users"."email", "public"."users"."password", "public"."users"."role_id", "public"."users"."is_active", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."roles"."id", "public"."roles"."code", "public"."roles"."name", "public"."roles"."description", "public"."roles"."is_system_role", "public"."roles"."is_active", "public"."roles"."created_at" FROM "public"."roles" WHERE "public"."roles"."id" IN ($1) OFFSET $2
Fetched Subtopic: {
  "id": "5163d520-efa8-40e8-acc8-d2aeedec5fe2",
  "topicId": "14027362-61ff-47bd-b1aa-7bf7d6d3462f",
  "title": "Subtopic 1 with Quiz",
  "description": "This subtopic has a quiz",
  "videoUrl": null,
  "duration": null,
  "orderIndex": 0,
  "isActive": true,
  "createdAt": "2026-02-07T23:29:50.496Z",
  "updatedAt": "2026-02-07T23:29:50.496Z",
  "questions": [
    {
      "id": "59542ebc-ab35-4315-a52c-2f39471d72f6",
      "subtopicId": "5163d520-efa8-40e8-acc8-d2aeedec5fe2",
      "questionTypeId": "SINGLE_CHOICE",
      "questionText": "What is 2 + 2?",
      "options": [
        "3",
        "4",
        "5",
        "6"
      ],
      "correctAnswer": "4",
      "points": 5,
      "orderIndex": 0,
      "isActive": true,
      "createdAt": "2026-02-07T23:29:50.497Z",
      "updatedAt": "2026-02-07T23:29:50.497Z"
    },
    {
      "id": "ea2f456e-60da-4b95-8394-624dae289a33",
      "subtopicId": "5163d520-efa8-40e8-acc8-d2aeedec5fe2",
      "questionTypeId": "TRUE_FALSE",
      "questionText": "Is the sky blue?",
      "options": [
        "True",
        "False"
      ],
      "correctAnswer": "True",
      "points": 2,
      "orderIndex": 1,
      "isActive": true,
      "createdAt": "2026-02-07T23:29:50.500Z",
      "updatedAt": "2026-02-07T23:29:50.500Z"
    }
  ]
}
âœ… SUCCESS: Questions were created and retrieved successfully.
Question 1: What is 2 + 2?
Question 2: Is the sky blue?
Cleaning up...
prisma:query DELETE FROM "public"."courses" WHERE ("public"."courses"."id" = $1 AND 1=1) RETURNING "public"."courses"."id", "public"."courses"."title", "public"."courses"."slug", "public"."courses"."description", "public"."courses"."instructor_id", "public"."courses"."category_id", "public"."courses"."status_code", "public"."courses"."visibility_code", "public"."courses"."access_code", "public"."courses"."thumbnail_url", "public"."courses"."price", "public"."courses"."discounted_price", "public"."courses"."duration", "public"."courses"."enrollment_count", "public"."courses"."average_rating", "public"."courses"."total_reviews", "public"."courses"."is_active", "public"."courses"."review_note", "public"."courses"."reviewed_by", "public"."courses"."reviewed_at", "public"."courses"."is_locked", "public"."courses"."created_at", "public"."courses"."updated_at"
Test course deleted.
